---
// Settings/admin page for the frontend.
import BaseLayout from '../layouts/BaseLayout.astro';
import SettingsPage from '../components/SettingsPage'; // Import as a React component

const pageTitle = "Settings"; // BaseLayout prepends "mango.tc news - "
const pageDescription = "Manage your mango.tc news settings and preferences.";
const ogImageUrl = "/logo.png"; // Assuming logo.png is in public directory
const ogUrl = Astro.url.href;
const ogType = "website";
---

<BaseLayout
  title={pageTitle}
  description={pageDescription}
  ogImageUrl={ogImageUrl}
  ogUrl={ogUrl}
  ogType={ogType}
>
  <SettingsPage client:load />
</BaseLayout>

<script is:inline>
  // Client-side script to check for authentication token
  document.addEventListener('astro:page-load', () => {
    const token = localStorage.getItem('jwtToken');
    if (!token) {
      // Redirect to homepage if not logged in
      window.location.href = '/';
    }
  });
</script>
