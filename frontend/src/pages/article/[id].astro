---
// Dynamic route for displaying individual articles.
import BaseLayout from '../../layouts/BaseLayout.astro';
import ArticleDetail from '../../components/ArticleDetail'; // Import as a React component

export const prerender = false; // Mark this page for dynamic rendering

const { id } = Astro.params;

// Fetch article data server-side
const backendApiUrl = import.meta.env.PUBLIC_BACKEND_API_URL;
const articleResponse = await fetch(`${backendApiUrl}/articles/${id}`);
const article = await articleResponse.json();

// Construct the page title
const pageTitle = `mangonews - ${article.title}`;
---

<BaseLayout title={pageTitle}>
  {/* The ArticleDetail component will fetch data client-side */}
  <ArticleDetail id={id} client:load />
</BaseLayout>
