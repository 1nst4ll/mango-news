---
import BaseLayout from '../../../../layouts/BaseLayout.astro';
import NewsFeed from '../../../../components/NewsFeed'; // Import as a React component
import { getCollection } from 'astro:content';

export const prerender = false; // Mark this page for dynamic rendering

const { lang, topicSlug } = Astro.params;

// Fetch all topics to get the original topic name if needed, or just use topicSlug
// For now, we'll just pass topicSlug directly to NewsFeed as activeCategory

// Construct the page title
const pageTitle = `mango.tc news - ${topicSlug ? topicSlug.replace(/-/g, ' ').split(' ').map(word => word.charAt(0).toUpperCase() + word.slice(1)).join(' ') : 'Topic'}`;
const pageDescription = `Latest news articles on ${topicSlug ? topicSlug.replace(/-/g, ' ') : 'a specific topic'} from across the Turks and Caicos Islands.`;
---

<BaseLayout title={pageTitle} description={pageDescription}>
  <main class="flex-grow">
    <div class="container mx-auto p-4">
      <h1 class="text-3xl font-bold mb-6">
        {topicSlug ? topicSlug.replace(/-/g, ' ').split(' ').map(word => word.charAt(0).toUpperCase() + word.slice(1)).join(' ') : 'Topic'}
      </h1>
      <NewsFeed client:load activeCategory={topicSlug} />
    </div>
  </main>
</BaseLayout>
